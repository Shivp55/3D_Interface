<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel='stylesheet' type='text/css' href='http://www.x3dom.org/download/x3dom.css'></link>
  <script type='text/javascript' src='x3Dom/x3dom.js'> </script>
  <script type='text/javascript' src='x3Dom/x3dom-full.js'> </script>

  <title>Training</title>
    <script>
        function main(){
            for(let z=-500; z<500; z+=80)
                addTrees(z);
            for(let x=-100; x<400; x+=80)
                addTreesHorizontal(x);
            for(let x=-100; x<500; x+=80)
                for(let z=200; z<500; z+=80)
                    addTowers(x,z);
            for(let x=-100; x<500; x+=80)
                for(let z=-200; z>-500; z+=-80)
                    addTowers(x,z);
            for(let z=480; z>100; z+=-90)
                addLights(z);
            for(let z=-130; z>-500; z+=-90)
                addLights(z);
        }
        function addTrees(z){
            let scene=document.getElementById('scene');
            let mainTransform=document.getElementById('mainTransform')
            // let mainRotation=document.getElementById('mainRotation')
            let mainGroup=document.getElementById('room');
            let treeTransform=document.createElement('Transform');
            treeTransform.setAttribute('translation','-485 25 '+z);
            let treeGrp=document.createElement('group');

            // Trunk
            let trunkShape=document.createElement('shape');
            let trunkAppearance=document.createElement('appearance')
            let trunkMaterial=document.createElement('material')
            trunkMaterial.setAttribute('diffuseColor', '#5d4a36')
            let trunk=document.createElement('cylinder')
            trunk.setAttribute('radius','5')
            trunk.setAttribute('height','50')
            trunkAppearance.append(trunkMaterial)
            trunkShape.append(trunkAppearance)
            trunkShape.append(trunk)
            treeGrp.append(trunkShape)

            //top
            let coneTransform=document.createElement('transform')
            coneTransform.setAttribute('translation', '0 50 0')
            let coneShape=document.createElement('shape')
            let coneAppearance=document.createElement('appearance')
            let img=document.createElement('ImageTexture');
            img.setAttribute('url','res/tree2.png')
            let cone=document.createElement('cone')
            cone.setAttribute('bottomRadius','30')
            cone.setAttribute('topRadius','1')
            cone.setAttribute('height','100')
            coneAppearance.append(img)
            coneShape.append(coneAppearance)
            coneShape.append(cone)
            coneTransform.append(coneShape)
            treeGrp.append(coneTransform)
            treeTransform.append(treeGrp)
            mainGroup.append(treeTransform)
            // mainRotation.append(mainGroup)
            mainTransform.append(mainGroup)
            scene.append(mainTransform)
        }
        function addTreesHorizontal(x){
            let scene=document.getElementById('scene');
            let mainTransform=document.getElementById('mainTransform')
            // let mainRotation=document.getElementById('mainRotation')
            let mainGroup=document.getElementById('room');
            let treeTransform=document.createElement('Transform');
            treeTransform.setAttribute('translation',x+' 30 -150');
            let treeGrp=document.createElement('group');

            // Trunk
            let trunkShape=document.createElement('shape');
            let trunkAppearance=document.createElement('appearance')
            let trunkMaterial=document.createElement('material')
            trunkMaterial.setAttribute('diffuseColor', '#5d4a36')
            let trunk=document.createElement('cylinder')
            trunk.setAttribute('radius','5')
            trunk.setAttribute('height','50')
            trunkAppearance.append(trunkMaterial)
            trunkShape.append(trunkAppearance)
            trunkShape.append(trunk)
            treeGrp.append(trunkShape)

            //top
            let coneTransform=document.createElement('transform')
            coneTransform.setAttribute('translation', '0 50 0')
            let coneShape=document.createElement('shape')
            let coneAppearance=document.createElement('appearance')
            let img=document.createElement('ImageTexture');
            img.setAttribute('url','res/tree2.png')
            let cone=document.createElement('cone')
            cone.setAttribute('bottomRadius','30')
            cone.setAttribute('topRadius','1')
            cone.setAttribute('height','100')
            coneAppearance.append(img)
            coneShape.append(coneAppearance)
            coneShape.append(cone)
            coneTransform.append(coneShape)
            treeGrp.append(coneTransform)
            treeTransform.append(treeGrp)
            mainGroup.append(treeTransform)
            // mainRotation.append(mainGroup)
            mainTransform.append(mainGroup)
            scene.append(mainTransform)
        }

        function addTowers(x,z){
            let scene=document.getElementById('scene');
            let mainTransform=document.getElementById('mainTransform')
            // let mainRotation=document.getElementById('mainRotation')
            let mainGroup=document.getElementById('room');
            let streetTransform=document.createElement('transform')
            streetTransform.setAttribute('translation',x+' 100 ' +z)
            // scene.append(streetTransform)

            //Towers
            let towerShape=document.createElement('shape')
            let towerAppearance=document.createElement('appearance')
            let towerMaterial=document.createElement('material')
            towerMaterial.setAttribute('diffuseColor','1 0 0')
            let tower=document.createElement('box')
            let towerImg=document.createElement('ImageTexture')
            towerImg.setAttribute('url','res/tower_texture.jpg')
            towerImg.setAttribute('repeatT','true')
            tower.setAttribute('size','50 200 50')


            //Append
            towerAppearance.append(towerImg)
            towerAppearance.append(towerMaterial)
            towerShape.append(towerAppearance)
            towerShape.append(tower)
            streetTransform.append(towerShape)
            mainGroup.append(streetTransform)
            mainTransform.append(mainGroup)
            scene.append(mainTransform)
        }
        function addLights(z){
            let scene=document.getElementById('scene');
            let mainTransform=document.getElementById('mainTransform')
            // let mainRotation=document.getElementById('mainRotation')
            let mainGroup=document.getElementById('room');
            let lightTransform=document.createElement('Transform')
            lightTransform.setAttribute('translation','-180 25 '+z)
            let lightGroup=document.createElement('group')

            //cylinder
            let cylinderShape=document.createElement('shape')
            let cylinderAppearance=document.createElement('appearance')
            let cylinderMaterial=document.createElement('material')
            cylinderMaterial.setAttribute('diffuseColor','#aeb1b8')
            let cylinder=document.createElement('cylinder')
            cylinder.setAttribute('height','50')
            cylinder.setAttribute('radius','2.5')
            cylinderAppearance.append(cylinderMaterial)
            cylinderShape.append(cylinderAppearance)
            cylinderShape.append(cylinder)
            lightGroup.append(cylinderShape)


            //sphere
            let sphereTransform=document.createElement('transform')
            sphereTransform.setAttribute('translation','0 25 0')
            let sphereShape=document.createElement('shape')
            // let sphereAppearance=document.createElement('appearance')
            // let sphereMaterial=document.createElement('material')
            // sphereMaterial.setAttribute('diffuseColor','1 0 0')
            let sphere=document.createElement('sphere')
            // sphereAppearance.append(sphereMaterial)
            // sphereShape.append(sphereAppearance)
            sphere.setAttribute('radius','10')
            sphereShape.append(sphere)
            sphereTransform.append(sphereShape)
            lightGroup.append(sphereTransform)
            lightTransform.append(lightGroup)
            mainGroup.append(lightTransform)
            mainTransform.append(mainGroup)
            scene.append(mainTransform)
        }

    </script>
</head>
<body onload="main();">
<x3d height="800px" width="100%" showStat="true">
  <scene id="scene">

<!--    <Viewpoint position='0 0 900' orientation='0 0 0 0' set_bind="false"></Viewpoint>-->
    <Viewpoint position='0 1200 0' orientation='1 0 0 -1.571' set_bind="true" description="top"></Viewpoint>
    <Transform scale="0.4 0.4 0.6" id="mainTransform">
<!--      <Transform rotation="1 0 0 -50.0" id="mainRotation">-->
        <Group id="room">
          <Shape DEF="wall">
            <Appearance DEF='wallpaper'>
              <!--                            <Material DEF="floor" diffuseColor="1 0 0"/>-->
<!--              <ImageTexture url='res/Road-Texture.jpg'/>-->
<!--              <TextureTransform scale='10 10'/>-->
            </Appearance>
            <Box size="1000 0.2 1000"/>
          </Shape>
<!--          Road-->
          <Transform translation="-315 3.5 0 ">
            <Shape>
              <Appearance>
<!--                <Material DEF="roadSide" diffuseColor="#3c6720"></Material>-->
                <ImageTexture url='res/Road-Texture.jpg'/>
              </Appearance>
              <Box size="230 1 1000"/>
            </Shape>
          </Transform>
          <Transform translation="150 3.5 0 ">
            <Transform rotation="0 1 0 -1.57">
              <Shape>
                <Appearance>
                  <Material DEF="roadSide" diffuseColor="#3c6720"></Material>
                  <ImageTexture url='res/Road-Texture.jpg'/>
                </Appearance>
                <Box size="230 1 700"/>
              </Shape>
            </Transform>
          </Transform>
<!--          Sides of Roads-->
          <Transform translation="-465 3.5 0 ">
            <Shape>
              <Appearance>
                <Material DEF="roadSide" diffuseColor="#3c5720"></Material>
              </Appearance>
              <Box size="70 5 1000"/>
            </Shape>
          </Transform>
          <Transform translation="-165 3.5 300 ">
            <Shape>
              <Appearance>
                <Material DEF="roadSide" diffuseColor="#3c5720"></Material>

              </Appearance>
              <Box size="70 5 400"/>
            </Shape>
          </Transform>
          <Transform translation="-165 3.5 -300 ">
            <Shape>
              <Appearance>
                <Material DEF="roadSide" diffuseColor="#3c5720"></Material>
              </Appearance>
              <Box size="70 5 400"/>

            </Shape>
          </Transform>
          <Transform translation="185 3.5 -135 ">
            <Transform rotation="0 1 0 -1.57">
              <Shape>
                <Appearance>
                  <Material DEF="roadSide" diffuseColor="#3c5720"></Material>
                </Appearance>
                <Box size="70 5 630"/>
              </Shape>
            </Transform>
          </Transform>
          <Transform translation="185 3.5 135 ">
            <Transform rotation="0 1 0 -1.57">
              <Shape>
                <Appearance>
                  <Material DEF="roadSide" diffuseColor="#3c5720"></Material>
                </Appearance>
                <Box size="70 5 630"/>
              </Shape>
            </Transform>
          </Transform>
            <Transform translation="150 1 300">
                <Shape>
                    <Appearance>
<!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/ground3.jpg"/>

<!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="700 1 400"/>
                </Shape>
            </Transform>
            <Transform translation="160 12 500">
                <Shape>
                    <Appearance>
<!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/fence.png"/>

<!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="730 40 1"/>
                </Shape>
            </Transform>
            <Transform translation="500 12 320">
                <Shape>
                    <Appearance>
<!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/fence.png"/>

                        <!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="1 40 360"/>
                </Shape>
            </Transform>
            <Transform translation="150 1 -300">
                <Shape>
                    <Appearance>
                        <!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/ground3.jpg"/>

                        <!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="700 1 400"/>
                </Shape>
            </Transform>
            <Transform translation="160 12 -500">
                <Shape>
                    <Appearance>
                        <!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/fence.png"/>

                        <!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="730 40 1"/>
                </Shape>
            </Transform>
            <Transform translation="500 12 -320">
                <Shape>
                    <Appearance>
                        <!--                        <Material diffuseColor="1 0 0"/>-->
                        <ImageTexture url="res/fence.png"/>

                        <!--                        </ImageTexture>-->
                    </Appearance>
                    <box size="1 40 360"/>
                </Shape>
            </Transform>


        </Group>
<!--      </Transform>-->

    </Transform>

  </scene>

</x3d>
</body>

</html>